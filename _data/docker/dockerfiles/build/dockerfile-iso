FROM maven:3.8.1-adoptopenjdk-8 as build
WORKDIR /nabhi-backend
COPY . .
WORKDIR /nabhi-backend
RUN mvn -am -pl nabhi-iso install -DskipTests=true -Pdq

FROM openjdk:8-jdk-alpine
ARG JAR_FILE=/nabhi-backend/nabhi-iso/target/iso.jar
COPY --from=build ${JAR_FILE} iso.jar
ENTRYPOINT ["java","-jar","/iso.jar"]